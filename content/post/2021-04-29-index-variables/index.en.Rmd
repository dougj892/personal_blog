---
title: Index variables
author: ''
date: '2021-04-29'
slug: []
draft: true
categories: []
tags: []
lastmod: '2021-04-29T09:02:50+07:00'
keywords: []
description: ''
comment: no
toc: no
autoCollapseToc: yes
postMetaInFooter: no
hiddenFromHomePage: no
contentCopyright: no
reward: no
mathjax: yes
mathjaxEnableSingleDollar: yes
mathjaxEnableAutoNumber: no
hideHeaderAndFooter: no
flowchartDiagrams:
  enable: no
  options: ''
sequenceDiagrams:
  enable: no
  options: ''
---

There are many instances where you have a bunch of variables and you need to boil them down to one or just a few. For example, 

Within economics, people tend to use a few different approaches to constructing such "index" variables. The simplest method, which I've seen attributed to Katz, is to standardize each variable, add them all up, and then standardize again. Another common approach is to apply principal components analysis and use the first component. Lastly, people often use the approach by Anderson.

```{r}
library(tidyverse); library(MASS)

# generate random variable
n <- 100000
x1 <- rnorm(n)

# Generate two correlated random variables
rho <- .6
Sigma <- matrix(data = c(1,rho,rho, 1), nrow = 2)
z <- mvrnorm(n, mu = c(0,0), Sigma = Sigma)
z1 <- z[,1]
z2 <- z[,2]

# Create a dataframe from the three variables
df <- tibble(x1 = x1, z1 = z1, z2 = z2)

# Test that all means are 0, variances are 1, and covariance of z1 and z2 is roughly equal to rho
vars <- list(x1, z1, z2)
map_dbl(vars, mean)
map_dbl(vars, var)
cov(z1, z2)

# Weights from PCA
pca_weights <- prcomp(~ x1 + z1 + z2, data = df, rank = 1)
pca

# Weights from Anderson method
Sigma_inv <- solve(cov(df))
anderson_weights <- colSums(Sigma_inv)
anderson_weights
```


