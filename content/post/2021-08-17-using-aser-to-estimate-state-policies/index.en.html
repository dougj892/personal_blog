---
title: Using ASER to estimate state policies
author: ''
date: '2021-08-17'
slug: []
categories: []
tags: []
lastmod: '2021-08-17T12:35:01+07:00'
keywords: []
description: ''
comment: no
toc: no
autoCollapseToc: no
postMetaInFooter: no
hiddenFromHomePage: no
contentCopyright: no
reward: no
mathjax: no
mathjaxEnableSingleDollar: no
mathjaxEnableAutoNumber: no
hideHeaderAndFooter: no
flowchartDiagrams:
  enable: no
  options: ''
sequenceDiagrams:
  enable: no
  options: ''
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>

<div id="TOC">

</div>

<p>In a <a href="https://www.sciencedirect.com/science/article/pii/S0738059321000626">recent article</a> Andres Parrado and I take a look at the two main sources of learning outcomes data in India – NAS and ASER – and conclude that a) NAS data is (most likely) completely unreliable and b) ASER data, while reliable, is a bit noisy.</p>
<p>The implications for people considering using NAS data are pretty clear – you <strong>shouldn’t</strong>. For ASER, the implications are a bit murkier. In the paper, we say that analysts should probably avoid using ASER data at the district level (which the ASER Centre already recommended) and that they should be careful about comparing year-on-year changes between states. One topic we didn’t really touch is whether ASER data can be used to evaluate the impact of state-level policies. This is a tough question to answer because it depends not just on the level of noise in the ASER data but also on the methodology used and other aspects of the data.</p>
<p>One way to figure out whether ASER can be used to evaluate state-level policies is to take a stab at using it to evaluate state-level policies and see what happens. In this blog post, I attempt to do exactly that by using ASER to estimate the impact of Haryana’s Quality Improvement Programme using a synthetic control approach. The upshot of the analysis is that, even if we fudge the start date for the programme, we can’t confidently say that the reform had any impact on learning outcomes.</p>
<p>To be clear, I am not saying that the Haryana reforms had no impact. Rather, I am saying that this analysis which uses the best methods and the best data we have available provides absolutely no evidence that it had an impact. I also apologize for picking on BCG a bit in this post. BCG just did what we all do – paint our own efforts in the best light possible.</p>
<div id="the-haryana-quality-improvement-programme" class="section level1">
<h1>The Haryana Quality Improvement Programme</h1>
<p>I chose Haryana for this analysis because they seem to have spent more effort reforming their education system over the past ten years than any other state. (That is a subjective assessment on my part, but it certainly does seem like they generated more press and attention with their ed reforms than any other state.) In 2014, Haryana launched the “Quality Improvement Programme” (QIP), an ambitious project to improve learning in the states’ government schools through a variety of measures including monthly student assessments, teacher training, school consolidation, and leadership training. See <a href="https://www.business-standard.com/article/pti-stories/haryana-to-start-quality-improvement-programme-in-schools-114050800695_1.html">here</a> for details.</p>
<p>In <a href="https://www.bcg.com/industries/education/transforming-education-on-massive-scale">two</a> <a href="https://www.bcg.com/publications/2017/education-social-impact-breakthrough-education-reform-in-india">articles</a> on their website, Boston Consulting Group (BCG), the strategic partner on the QIP project, claim that QIP led to a massive increase in learning outcomes. According to one of the articles:</p>
<blockquote>
<p>“The impact of the reforms in Haryana has exceeded expectations. From 2012 through 2014, as the overhaul was being rolled out, the share of fifth graders who could do division increased 5% and the share who could read a standard second-grade text jumped 10%. That was quite a reversal: from 2010 through 2012, the share of fifth graders who could do division had fallen 26%, and the share of children who could read a standard second-grade text had dropped 17%. According to the National Achievements Survey report published in January 2016, Haryana was one of just two states in India that showed improvement in learning outcomes across all subjects, with 28 of the 30 Indian states posting declines or no change.”</p>
</blockquote>
</div>
<div id="a-closer-look-at-bcgs-claim" class="section level1">
<h1>A Closer Look at BCGs Claim</h1>
<p>The BCG articles claiming that QIP led to massive increases in learning outcomes mix and match data from ASER, NAS, and EI and learning outcomes from different grades. A more serious issue with the analysis that they claim that learning gains between 2012 and 2014 are due to QIP despite the fact that, by BCG’s own account, QIP started in 2014.</p>
<p>If we look at ASER data for Haryana from 2006 to 2018, it’s easy to see why they fudged the start date a bit. If we just look at the period between 2012 and 2014, the learning gains in Haryana do indeed look impressive!</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 4.0.5</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 4.0.5</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 4.0.5</code></pre>
<pre class="r"><code># Import the ASER trends over time data from my Github public repo
aser &lt;- read_csv(&quot;https://raw.githubusercontent.com/dougj892/public-datasets/master/ASER%20trends%20over%20time.csv&quot;) %&gt;% 
  mutate_at(vars(-state_abbr, -State), as.numeric) %&gt;% 
  select(year, State, state_abbr, std3_read = std3_read_std1_all, std5_read = std5_read_std2_all, std3_math  = std3_subtract_all, std5_math = std5_divis_all) 

# Create dataframe for plotting Haryana&#39;s learning outcomes over time
df &lt;- aser %&gt;% 
  filter(state_abbr == &quot;HR&quot;) %&gt;% 
  pivot_longer(cols = starts_with(&quot;std&quot;), names_to = &quot;year_and_subject&quot;) %&gt;% 
  mutate(year_and_subject = case_when(
    year_and_subject == &quot;std3_math&quot; ~ &quot;Grade 3 can do subtraction&quot;,
    year_and_subject == &quot;std3_read&quot; ~ &quot;Grade 3 can read grade 2 text&quot;,
    year_and_subject == &quot;std5_math&quot; ~ &quot;Grade 5 can do division&quot;,
    year_and_subject == &quot;std5_read&quot; ~ &quot;Grade 5 can read grade 2 text&quot;
  ))


ggplot(df, aes(x = year, y = value, colour = year_and_subject)) + 
  geom_line() +
  scale_x_continuous(breaks = seq(2006, 2018, 2))+
  labs(title = &quot;Haryana ASER scores over time&quot;, y = &quot;% rural children&quot;, colour = &quot;Year and subject&quot;)</code></pre>
<pre><code>## Warning: Removed 2 row(s) containing missing values (geom_path).</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>Yet, if we compare these gains with gains from other states, it’s unclear whether even with the fudged start date QIP clearly led to learning gains in Haryana. While ASER scores increased between 2012 and 2014 in Haryana, they increased just as much in other states too. Clearly, we need a more rigorous approach to estimating impact.</p>
<pre class="r"><code># Generate dataset of deltas from 2012 to 2014 
diffs &lt;- aser %&gt;% filter((year == 2012) | (year == 2014)) %&gt;% group_by(State) %&gt;%
  mutate_at(vars(starts_with(&quot;std&quot;)), ~.x-lag(.x, order_by = year)) %&gt;% 
  filter(year == 2014) %&gt;% 
  ungroup()

diffs_long &lt;- diffs %&gt;% pivot_longer(starts_with(&quot;std&quot;), names_to = &quot;temp&quot;, values_to = &quot;diff&quot;) %&gt;% 
  mutate(class = str_sub(temp, 4,4), subject = str_extract(temp, &quot;(math|read)&quot;))


# plot the reading changes for 2016
ggplot(diffs_long, aes(x = state_abbr, y = diff, fill=factor(ifelse(State==&quot;haryana&quot;,&quot;Highlighted&quot;,&quot;Normal&quot;)))) + 
  scale_fill_manual(name = &quot;area&quot;, values=c(&quot;red&quot;,&quot;grey50&quot;), guide= FALSE) +
  geom_bar(stat = &quot;identity&quot;)+
  theme(axis.text.y = element_text(size = 5)) +
  facet_grid(subject ~ class) +
  coord_flip() +
  labs(y = &quot;Change from 2012 to 2014&quot;, x =element_blank(), title = &quot;Figure 3: Change in ASER score 2012-2014 by state, subject and grade&quot;)</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (position_stack).</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="using-the-synthetic-control-method-to-estimate-the-impact-of-qip" class="section level1">
<h1>Using the Synthetic Control Method to Estimate the Impact of QIP</h1>
<p>In the code below, I estimate the effect of QIP, under the assumption that QIP started in 2012 and ended in 2014. The synthetic control method offers a more rigorous approach to the classic single unit case study. Traditionally, when attempting to estimate the impact of a policy implemented in only one state or region, researchers would pick one other state or region to use as the control. This approach is obviously fraught. States may vary significantly in their policies and trends over time and thus it is questionable whether any one state would serve as a good control for another state.</p>
<p>The synthetic control method seeks to create a better control for the state in which the policy or intervention has been implemented by using a weighted average of the outcomes for several other states which display similar trends in the outcome prior to the intervention and have similar covariate values. <a href="https://www.tandfonline.com/doi/pdf/10.1198/jasa.2009.ap08746">Abadie, Diamond, and Hainmuller (2011)</a> show that the if this “synthetic control” matches the intervention state in terms of pre-intervention outcomes and covariates, and outcomes are determined by a factor model (see article for more details), the synthetic control will likely do a good job of predicting the outcome in the intervention state after the implementation of the intervention.
A second advantage of the synthetic control approach is that it provides a natural way to test the reliability of our estimate through the use of placebo tests. For example, we may conduct a set of placebo test by dropping the intervention state from our sample and then calculating the “effect” for each of the other states. By comparing the size of the effect for the actual intervention state with the size of the placebo effects for the other states, we may get a sense of how robust our estimate is.</p>
<p><a href="https://economics.mit.edu/files/17847">Abadie (2019)</a> provides an excellent overview of the method and <a href="https://dspace.mit.edu/handle/1721.1/71234">Abadie et al (2011)</a> provides clear guidance on how to use the approach in R.</p>
</div>
<div id="details-of-the-synthetic-control-approach" class="section level1">
<h1>Details of the Synthetic Control Approach</h1>
<p>I use SCM to estimate the impact of QIP on grade 5 reading levels in Haryana in 2013 and 2014. I use grade 5 reading levels as the outcome because it allows me to use grade 3 reading levels from the previous round as a covariate which should increase my precision substantially. There is now a cottage industry of synthetic control approaches. I use the original synthetic control approach as described in Abadie, Diamond, and Hainmuller due to the availability of the R Synth package to apply this approach.</p>
<p>To apply the synthetic control approach, we must specify a set of predictors and a set of linear combinations of the pre-intervention outcomes variables to generate the synthetic control match. For predictors, I use grade 3 reading scores in 2012, the mean of grade 5 reading scores from 2010 to 2012, the mean of grade 3 math scores from 2007 to 2012, and the mean of grade 5 math scores from 2007 to 2012. Other details can be found in the code below.</p>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<p>The graphs below show the estimated effect, based on SCM, for all states in 2013 and 2014. While the effect for Haryana is positive for both years the estimated effect in 2013 is smaller than the estimated placebo effect for 3 other states and smaller than the estimated placebo effect for 4 other states in 2014. Since the estimated effect is significantly smaller than several of the placebo effects we can’t be confident that the estimated effect is in fact a true effect.</p>
<pre class="r"><code>library(Synth)</code></pre>
<pre><code>## Warning: package &#39;Synth&#39; was built under R version 4.0.4</code></pre>
<pre class="r"><code># drop all years after 2014 and states with missing values
# missing values generates an unbalanced panel which causes an error
aser &lt;- aser %&gt;% filter(year &lt;= 2014) %&gt;% 
  filter(!(state_abbr %in% c(&quot;SK&quot;, &quot;TR&quot;, &quot;JK&quot;, &quot;MZ&quot;, &quot;AR&quot;)))

# Create index for state (this is required by the Synth package)
aser &lt;- aser %&gt;% group_by(state_abbr) %&gt;% mutate(id = group_indices())</code></pre>
<pre><code>## Warning: `group_indices()` was deprecated in dplyr 1.0.0.
## Please use `cur_group_id()` instead.</code></pre>
<pre class="r"><code># Find the ID number for Haryana. We will need this later
haryana_id &lt;- aser$id[aser$state_abbr == &quot;HR&quot;][1]

# Create a vector to assign relative weights to the predictors
v &lt;- c(.2,.2,.3,.3)

prep_synth &lt;- function(state_id) {
  dataprep_state &lt;- dataprep(foo = as.data.frame(aser),
           predictors = c(&quot;std5_math&quot;, &quot;std3_math&quot;),
           predictors.op = &quot;mean&quot;,
           time.predictors.prior = 2007:2012,
           special.predictors = list(
             list(&quot;std5_read&quot;, 2010:2012, &quot;mean&quot;),
             list(&quot;std3_read&quot;, 2012, &quot;mean&quot;)
           ),
           dependent = &quot;std5_read&quot;,
           unit.variable = &quot;id&quot;,
           unit.names.variable = &quot;state_abbr&quot;,
           time.variable = &quot;year&quot;,
           treatment.identifier = state_id, 
           controls.identifier = seq(1,max(aser$id),1)[-state_id],
           time.optimize.ssr = 2006:2012,
           time.plot = 2006:2014)
  return(dataprep_state)
}

# Fit the model to Haryana and see which states the method chose to approximate the synthetic control.
# hr &lt;- synth(data.prep.obj = prep_synth(haryana_id), custom.v = v)
#synth.tab(hr, prep_synth(haryana_id))

# Estimate placebo effect for each state. Technically, i should drop MH first but it doesn&#39;t make much of a difference
estimate_effects &lt;- function(state_id) {
  dataprep.temp &lt;- prep_synth(state_id)
  synth.out &lt;- synth(data.prep.obj = dataprep.temp, custom.v = v)
  # Generate vector or yearly effects. See section 3.3 of &quot;Synth: An R Package...&quot;
  yearly_effects &lt;- dataprep.temp$Y1plot - (dataprep.temp$Y0plot %*% synth.out$solution.w) 
  return(yearly_effects)
}

# Apply the estimate_effects function to each state in the dataset
effects &lt;- map(1:max(aser$id), estimate_effects)

# Effects is a list of lists. Wrangle the list into a dataframe.
temp &lt;- as.data.frame(do.call(cbind, effects))
effects_df &lt;- as.data.frame(t(as.matrix(temp)))

# Merge the dataframe of effects with a dataframe of states to get state names
results_df &lt;- aser %&gt;% count(state_abbr, id) %&gt;% 
  arrange(id) %&gt;% select(-n) %&gt;% 
  cbind(effects_df)</code></pre>
<pre class="r"><code>ggplot(results_df, aes(x = reorder(state_abbr, `2013`), 
                       y= `2013`,
                       fill = factor(ifelse(state_abbr==&quot;HR&quot;,&quot;Highlighted&quot;,&quot;Normal&quot;)))) + 
  scale_fill_manual(name = &quot;area&quot;, values=c(&quot;red&quot;,&quot;grey50&quot;), guide= FALSE) +
  geom_bar(stat = &quot;identity&quot;) +
  labs(title = &quot;Estimated effect in 2013&quot;, x = &quot;State&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>ggplot(results_df, aes(x = reorder(state_abbr, `2014`), 
                       y= `2014`,
                       fill = factor(ifelse(state_abbr==&quot;HR&quot;,&quot;Highlighted&quot;,&quot;Normal&quot;)))) + 
  scale_fill_manual(name = &quot;area&quot;, values=c(&quot;red&quot;,&quot;grey50&quot;), guide= FALSE) +
  geom_bar(stat = &quot;identity&quot;)+
  labs(title = &quot;Estimated effect in 2014&quot;, x = &quot;State&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
</div>
<div id="postscript" class="section level1">
<h1>Postscript</h1>
<p>In late 2017, Haryana launched “Saksham Ghoshna,” an equally ambitious follow-up project to QIP which also included regular student assessments as well as new dashboards and several other pedagogic interventions. Ironically, one of the officials involved <a href="https://yourstory.com/socialstory/2019/02/haryana-transformed-student-learning/amp">claimed</a> that:</p>
<blockquote>
<p>“If we look at NCERT’s various National Achievement Survey (NAS) and ASER reports, the surveys point out that the quality of school education in the state has been going down for years. Government school teachers in Haryana are well-qualified but somehow the link is missing. Classroom studies have not being meaningful. This was the initiation point.”</p>
</blockquote>
</div>
