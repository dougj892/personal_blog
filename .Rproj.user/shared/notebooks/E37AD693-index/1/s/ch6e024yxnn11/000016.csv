"0","library(tidyverse); library(readxl); library(ggrepel)"
"0","hlo <- read_excel(""C:/Users/dougj/Documents/Data/Education/HLO/hlo_database.xlsx"", sheet = ""HLO Database"")"
"0",""
"0","# Take the mean by year, get the latest year"
"0","hlo_latest <- hlo %>% group_by(code, year) %>% "
"0","  summarise(hlo = mean(hlo)) %>% "
"0","  ungroup() %>% group_by(code) %>% "
"0","  slice_max(order_by = year)"
"0",""
"0","# Merge with GDP per capita. I grabbed this dataset from Our World in Data but the source is the World Bank. Link here https://ourworldindata.org/grapher/gdp-per-capita-worldbank"
"0","gdp <- read_csv(""C:/Users/dougj/Documents/Data/gdp-per-capita-worldbank.csv"") %>% rename(gdp = `GDP per capita, PPP (constant 2011 international $)`, code = Code, year = Year)"
"0",""
"0","# generate list of countries for which we have PAL data"
"0","pal_countries <- c(""IND"", ""PAK"", ""KEN"", ""UGA"", ""TZA"", ""MLI"", ""SEN"", ""MEX"", ""NGA"")"
"0",""
"0","# Data for 7 countries doesn't merge. I just drop these"
"0","unmerged <- hlo_latest %>% anti_join(gdp, by = c(""code"", ""year""))"
"0","hlo_latest <- hlo_latest %>% left_join(gdp, by = c(""code"", ""year"")) %>% "
"0","  mutate(sample = if_else(code %in% pal_countries, ""PAL country"", ""Others"")) %>% "
"0","  mutate(log_gdp = log(gdp), code = if_else(code %in% pal_countries, code, """")) "
"0",""
"0",""
"0","# Graph HLO versus GDP"
"0","p <- ggplot(hlo_latest, aes(log_gdp, hlo, label = code)) + "
"0","  geom_point(aes(colour = sample)) + geom_smooth(method = ""lm"") +"
"0","  geom_text_repel() +"
"0","  labs(title = ""Most recent average HLO versus GDP per capita (PPP)"")"
"0","print(p)"
