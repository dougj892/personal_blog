"0","library(Synth)"
"2","package ‘Synth’ was built under R version 4.0.4"
"2","##
## Synth Package: Implements Synthetic Control Methods.

"
"2","## See http://www.mit.edu/~jhainm/software.htm for additional information.


"
"0","# drop all years after 2014 and states with missing values"
"0","# missing values generates an unbalanced panel which causes an error"
"0","aser <- aser %>% filter(year <= 2014) %>% "
"0","  filter(!(state_abbr %in% c(""SK"", ""TR"", ""JK"", ""MZ"", ""AR"")))"
"0",""
"0","# Create index for state (this is required by the Synth package)"
"0","aser <- aser %>% group_by(state_abbr) %>% mutate(id = group_indices())"
"2","`group_indices()` was deprecated in dplyr 1.0.0.
Please use `cur_group_id()` instead."
"0","# Find the ID number for Haryana. We will need this later"
"0","haryana_id <- aser$id[aser$state_abbr == ""HR""][1]"
"0",""
"0","# Create a vector to assign relative weights to the predictors"
"0","v <- c(.2,.2,.3,.3)"
"0",""
"0","# Generate model. # For predictors, I use grade 3 reading scores in 2012, "
"0","# the mean of grade 5 reading scores from 2010 to 2012, "
"0","# the mean of grade 3 math scores from 2007 to 2012, and the mean of grade 5 math scores from 2007 to 2012."
"0","prep_synth <- function(state_id) {"
"0","  dataprep_state <- dataprep(foo = as.data.frame(aser),"
"0","           predictors = c(""std5_math"", ""std3_math""),"
"0","           predictors.op = ""mean"","
"0","           time.predictors.prior = 2007:2012,"
"0","           special.predictors = list("
"0","             list(""std5_read"", 2010:2012, ""mean""),"
"0","             list(""std3_read"", 2012, ""mean"")"
"0","           ),"
"0","           dependent = ""std5_read"","
"0","           unit.variable = ""id"","
"0","           unit.names.variable = ""state_abbr"","
"0","           time.variable = ""year"","
"0","           treatment.identifier = state_id, "
"0","           controls.identifier = seq(1,max(aser$id),1)[-state_id],"
"0","           time.optimize.ssr = 2006:2012,"
"0","           time.plot = 2006:2014)"
"0","  return(dataprep_state)"
"0","}"
"0",""
"0","# Fit the model to Haryana and see which states the method chose to approximate the synthetic control."
"0","hr_prep <- prep_synth(haryana_id)"
"0","hr_synth <- synth(data.prep.obj = hr_prep, custom.v = v)"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.00295026"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.000613376"
"1"," "
"1","0.0006486259"
"1"," "
"1","2.82331e-05"
"1"," "
"1","0.001740489"
"1"," "
"1","0.001042049"
"1"," "
"1","0.5257368"
"1"," "
"1","0.003180442"
"1"," "
"1","0.0006720374"
"1"," "
"1","0.0002066103"
"1"," "
"1","0.0007562594"
"1"," "
"1","0.0005589547"
"1"," "
"1","0.0003506192"
"1"," "
"1","0.1717513"
"1"," "
"1","0.001007454"
"1"," "
"1","0.001876513"
"1"," "
"1","0.0008813377"
"1"," "
"1","0.0008540046"
"1"," "
"1","0.001584888"
"1"," "
"1","0.2842118"
"1"," "
"1","0.000977637"
"1"," "
"1","0.001320465"
"1"," "
"1","

"
"0","hr_trend <- hr_prep$Y1plot"
"0","hr_synth_control <- (hr_prep$Y0plot %*% hr_synth$solution.w) "
"0","hr_df <- tibble(year = 2006:2014, Haryana = hr_trend, `Synthetic control` = hr_synth_control) %>% "
"0","  pivot_longer(!year, names_to = ""State"", values_to = ""ASER Score"")"
"0",""
"0",""
"0","# Estimate placebo effect for each state. Technically, i should drop Haryana first but it doesn't make much of a difference"
"0","estimate_effects <- function(state_id) {"
"0","  dataprep.temp <- prep_synth(state_id)"
"0","  synth.out <- synth(data.prep.obj = dataprep.temp, custom.v = v)"
"0","  # Generate vector or yearly effects. See section 3.3 of ""Synth: An R Package..."""
"0","  yearly_effects <- dataprep.temp$Y1plot - (dataprep.temp$Y0plot %*% synth.out$solution.w) "
"0","  return(yearly_effects)"
"0","}"
"0",""
"0","# Apply the estimate_effects function to each state in the dataset"
"0","effects <- map(1:max(aser$id), estimate_effects)"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.003600345"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.003144465"
"1"," "
"1","0.02053991"
"1"," "
"1","0.006758243"
"1"," "
"1","0.004744785"
"1"," "
"1","0.03200059"
"1"," "
"1","0.004042552"
"1"," "
"1","0.004031068"
"1"," "
"1","0.003435162"
"1"," "
"1","0.2490799"
"1"," "
"1","0.005579323"
"1"," "
"1","0.01223861"
"1"," "
"1","0.2507915"
"1"," "
"1","0.005790155"
"1"," "
"1","0.002232929"
"1"," "
"1","0.002373226"
"1"," "
"1","0.02121225"
"1"," "
"1","0.3562374"
"1"," "
"1","0.002254614"
"1"," "
"1","0.004588815"
"1"," "
"1","0.006125409"
"1"," "
"1","0.002799136"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.007448282"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","2.83849e-05"
"1"," "
"1","8.4938e-06"
"1"," "
"1","8.7178e-06"
"1"," "
"1","6.3255e-06"
"1"," "
"1","7.0798e-06"
"1"," "
"1","1.22777e-05"
"1"," "
"1","1.06483e-05"
"1"," "
"1","0.3695193"
"1"," "
"1","0.0001689021"
"1"," "
"1","1.61288e-05"
"1"," "
"1","3.22387e-05"
"1"," "
"1","0.0004177153"
"1"," "
"1","0.1945972"
"1"," "
"1","0.0005046815"
"1"," "
"1","0.0001337533"
"1"," "
"1","9.1477e-06"
"1"," "
"1","5e-09"
"1"," "
"1","0.4343369"
"1"," "
"1","1.03187e-05"
"1"," "
"1","1.125e-07"
"1"," "
"1","0.0001716287"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.004949135"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","1.5231e-06"
"1"," "
"1","1.1453e-06"
"1"," "
"1","1.73939e-05"
"1"," "
"1","2.6191e-06"
"1"," "
"1","2.26877e-05"
"1"," "
"1","2.9223e-05"
"1"," "
"1","5.2316e-06"
"1"," "
"1","1.2851e-06"
"1"," "
"1","5.929e-07"
"1"," "
"1","1.4231e-06"
"1"," "
"1","1.1934e-06"
"1"," "
"1","9.317e-07"
"1"," "
"1","0.6338019"
"1"," "
"1","1.2034e-06"
"1"," "
"1","1.678e-06"
"1"," "
"1","0.2183923"
"1"," "
"1","0.1476882"
"1"," "
"1","1.3715e-06"
"1"," "
"1","2.30748e-05"
"1"," "
"1","3.2998e-06"
"1"," "
"1","1.6787e-06"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.007383111"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.00121599"
"1"," "
"1","0.00114863"
"1"," "
"1","0.06452697"
"1"," "
"1","0.00521432"
"1"," "
"1","0.001248131"
"1"," "
"1","0.002506907"
"1"," "
"1","0.2259236"
"1"," "
"1","0.001486176"
"1"," "
"1","0.0007424397"
"1"," "
"1","0.00137923"
"1"," "
"1","0.0011602"
"1"," "
"1","0.0008655159"
"1"," "
"1","0.002613631"
"1"," "
"1","0.001245738"
"1"," "
"1","0.002267685"
"1"," "
"1","0.001273982"
"1"," "
"1","0.3783582"
"1"," "
"1","0.002423781"
"1"," "
"1","0.3005696"
"1"," "
"1","0.0022066"
"1"," "
"1","0.001622724"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.002220264"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","1.5538e-06"
"1"," "
"1","2.421e-06"
"1"," "
"1","1.1499e-06"
"1"," "
"1","2.597e-06"
"1"," "
"1","9.667e-07"
"1"," "
"1","1.5976e-06"
"1"," "
"1","2.738e-06"
"1"," "
"1","0.3749173"
"1"," "
"1","1.3812e-06"
"1"," "
"1","0.1052332"
"1"," "
"1","2.1015e-06"
"1"," "
"1","9.712e-07"
"1"," "
"1","1.0095e-06"
"1"," "
"1","2.0677e-06"
"1"," "
"1","5.1016e-06"
"1"," "
"1","7.65e-07"
"1"," "
"1","6.756e-07"
"1"," "
"1","6.83489e-05"
"1"," "
"1","2.71e-08"
"1"," "
"1","0.5197512"
"1"," "
"1","2.7913e-06"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.006591769"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","1.088e-07"
"1"," "
"1","5.4e-08"
"1"," "
"1","5.48e-08"
"1"," "
"1","6.43e-08"
"1"," "
"1","6.02e-08"
"1"," "
"1","9.18e-08"
"1"," "
"1","5.35e-08"
"1"," "
"1","6.9e-08"
"1"," "
"1","0.2332707"
"1"," "
"1","1.599e-07"
"1"," "
"1","1.229e-07"
"1"," "
"1","3.064e-07"
"1"," "
"1","5.07e-08"
"1"," "
"1","1.857e-07"
"1"," "
"1","8.02e-08"
"1"," "
"1","0.7667275"
"1"," "
"1","4.94e-08"
"1"," "
"1","4.06e-08"
"1"," "
"1","1.003e-07"
"1"," "
"1","4.8e-08"
"1"," "
"1","1.039e-07"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.00295026"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.000613376"
"1"," "
"1","0.0006486259"
"1"," "
"1","2.82331e-05"
"1"," "
"1","0.001740489"
"1"," "
"1","0.001042049"
"1"," "
"1","0.5257368"
"1"," "
"1","0.003180442"
"1"," "
"1","0.0006720374"
"1"," "
"1","0.0002066103"
"1"," "
"1","0.0007562594"
"1"," "
"1","0.0005589547"
"1"," "
"1","0.0003506192"
"1"," "
"1","0.1717513"
"1"," "
"1","0.001007454"
"1"," "
"1","0.001876513"
"1"," "
"1","0.0008813377"
"1"," "
"1","0.0008540046"
"1"," "
"1","0.001584888"
"1"," "
"1","0.2842118"
"1"," "
"1","0.000977637"
"1"," "
"1","0.001320465"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.002931492"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","9.56892e-05"
"1"," "
"1","8.09915e-05"
"1"," "
"1","0.4619846"
"1"," "
"1","1.921e-06"
"1"," "
"1","0.0002053176"
"1"," "
"1","5.81799e-05"
"1"," "
"1","0.0001087891"
"1"," "
"1","0.0001053184"
"1"," "
"1","4.15875e-05"
"1"," "
"1","8.27004e-05"
"1"," "
"1","8.39539e-05"
"1"," "
"1","6.08971e-05"
"1"," "
"1","0.003401963"
"1"," "
"1","8.73906e-05"
"1"," "
"1","0.0001669258"
"1"," "
"1","7.98723e-05"
"1"," "
"1","0.0692169"
"1"," "
"1","0.3349395"
"1"," "
"1","6.64344e-05"
"1"," "
"1","0.1290092"
"1"," "
"1","0.0001218675"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.003741626"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","1.6804e-05"
"1"," "
"1","0.00017618"
"1"," "
"1","8.3819e-06"
"1"," "
"1","1.35004e-05"
"1"," "
"1","0.394325"
"1"," "
"1","3.8295e-06"
"1"," "
"1","5.9571e-06"
"1"," "
"1","1.34784e-05"
"1"," "
"1","0.1889624"
"1"," "
"1","7.91483e-05"
"1"," "
"1","7.87941e-05"
"1"," "
"1","9.1302e-06"
"1"," "
"1","7.8219e-06"
"1"," "
"1","1.15035e-05"
"1"," "
"1","2.02664e-05"
"1"," "
"1","5.6186e-06"
"1"," "
"1","1.90413e-05"
"1"," "
"1","0.4161796"
"1"," "
"1","7.3631e-06"
"1"," "
"1","4.03736e-05"
"1"," "
"1","1.57612e-05"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.00245224"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","2.503e-07"
"1"," "
"1","1.453e-07"
"1"," "
"1","3.39e-08"
"1"," "
"1","3.43e-08"
"1"," "
"1","2.97e-08"
"1"," "
"1","0.5514577"
"1"," "
"1","6.41e-08"
"1"," "
"1","3.83e-08"
"1"," "
"1","2.076e-07"
"1"," "
"1","0.4484325"
"1"," "
"1","1.4358e-06"
"1"," "
"1","0.0001025905"
"1"," "
"1","4.21e-08"
"1"," "
"1","4.3348e-06"
"1"," "
"1","1.45e-07"
"1"," "
"1","8.51e-08"
"1"," "
"1","2.71e-08"
"1"," "
"1","5.95e-08"
"1"," "
"1","2.57e-08"
"1"," "
"1","2.99e-08"
"1"," "
"1","2.655e-07"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.003757136"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","2.6859e-06"
"1"," "
"1","2.5781e-06"
"1"," "
"1","1.6406e-06"
"1"," "
"1","3.1435e-06"
"1"," "
"1","0.1782866"
"1"," "
"1","7.2532e-06"
"1"," "
"1","2.7753e-06"
"1"," "
"1","2.4884e-06"
"1"," "
"1","4.5419e-06"
"1"," "
"1","0.5216622"
"1"," "
"1","3.8804e-06"
"1"," "
"1","1.0358e-06"
"1"," "
"1","1.2706e-06"
"1"," "
"1","1.9871e-06"
"1"," "
"1","3.2478e-06"
"1"," "
"1","2.2221e-06"
"1"," "
"1","2.8257e-06"
"1"," "
"1","3.536e-06"
"1"," "
"1","0.299998"
"1"," "
"1","3.5396e-06"
"1"," "
"1","2.6347e-06"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.003307828"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.007203789"
"1"," "
"1","0.004850135"
"1"," "
"1","0.003670629"
"1"," "
"1","0.006081364"
"1"," "
"1","0.1439158"
"1"," "
"1","-2e-10"
"1"," "
"1","0.002095495"
"1"," "
"1","0.003983563"
"1"," "
"1","0.008562244"
"1"," "
"1","0.537562"
"1"," "
"1","0.002552828"
"1"," "
"1","0.001760623"
"1"," "
"1","0.002653431"
"1"," "
"1","0.001621198"
"1"," "
"1","0.002792604"
"1"," "
"1","0.003104462"
"1"," "
"1","0.2428801"
"1"," "
"1","0.003636109"
"1"," "
"1","0.004230265"
"1"," "
"1","0.01415162"
"1"," "
"1","0.00269176"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.02760564"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","1.997e-07"
"1"," "
"1","8.38e-08"
"1"," "
"1","2.177e-07"
"1"," "
"1","1.094e-07"
"1"," "
"1","7.45e-08"
"1"," "
"1","0.5314181"
"1"," "
"1","3.248e-07"
"1"," "
"1","1.016e-07"
"1"," "
"1","8.15e-08"
"1"," "
"1","0.1834255"
"1"," "
"1","1.259e-07"
"1"," "
"1","1.501e-07"
"1"," "
"1","0.1795692"
"1"," "
"1","0.1055845"
"1"," "
"1","1.165e-07"
"1"," "
"1","5.145e-07"
"1"," "
"1","8.73e-08"
"1"," "
"1","6.42e-08"
"1"," "
"1","1.245e-07"
"1"," "
"1","7.46e-08"
"1"," "
"1","1.764e-07"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.02586202"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","1.36e-08"
"1"," "
"1","4.228e-07"
"1"," "
"1","0.8806223"
"1"," "
"1","1.71e-08"
"1"," "
"1","1.71e-08"
"1"," "
"1","5.5e-09"
"1"," "
"1","7.6e-09"
"1"," "
"1","4.062e-07"
"1"," "
"1","2.23e-08"
"1"," "
"1","6.2e-09"
"1"," "
"1","7.7e-09"
"1"," "
"1","1.2e-08"
"1"," "
"1","1.01e-08"
"1"," "
"1","2.41e-08"
"1"," "
"1","5.14e-08"
"1"," "
"1","6.4e-09"
"1"," "
"1","2.56e-08"
"1"," "
"1","0.1193766"
"1"," "
"1","9.5e-09"
"1"," "
"1","3.38e-08"
"1"," "
"1","3.05e-08"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.00198274"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","2.1784e-06"
"1"," "
"1","1.202e-07"
"1"," "
"1","1.698e-06"
"1"," "
"1","2.2545e-06"
"1"," "
"1","2.1297e-06"
"1"," "
"1","0.0003848932"
"1"," "
"1","1.07636e-05"
"1"," "
"1","2.0922e-06"
"1"," "
"1","9.034e-07"
"1"," "
"1","0.02438018"
"1"," "
"1","4.932e-06"
"1"," "
"1","2.1706e-06"
"1"," "
"1","0.5851095"
"1"," "
"1","2.39e-08"
"1"," "
"1","0.3900845"
"1"," "
"1","3.5714e-06"
"1"," "
"1","1.4944e-06"
"1"," "
"1","2.905e-07"
"1"," "
"1","4.6143e-06"
"1"," "
"1","1.6487e-06"
"1"," "
"1","2.9e-08"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.007667384"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.0001600938"
"1"," "
"1","0.000177147"
"1"," "
"1","0.001533617"
"1"," "
"1","0.0004564139"
"1"," "
"1","0.000152519"
"1"," "
"1","0"
"1"," "
"1","0.1482372"
"1"," "
"1","0.001681284"
"1"," "
"1","0.0001185757"
"1"," "
"1","2.75917e-05"
"1"," "
"1","5.29347e-05"
"1"," "
"1","0.0001076089"
"1"," "
"1","7.13677e-05"
"1"," "
"1","0.004520519"
"1"," "
"1","0.3398896"
"1"," "
"1","0.000107823"
"1"," "
"1","0.0003023858"
"1"," "
"1","0.5016895"
"1"," "
"1","2.3061e-06"
"1"," "
"1","0.000247652"
"1"," "
"1","0.0004638466"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.005450297"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.000244983"
"1"," "
"1","1.4109e-05"
"1"," "
"1","0.02002901"
"1"," "
"1","1.11208e-05"
"1"," "
"1","1.17938e-05"
"1"," "
"1","0.8178798"
"1"," "
"1","4.7515e-06"
"1"," "
"1","1.00513e-05"
"1"," "
"1","1.52869e-05"
"1"," "
"1","0.0001083445"
"1"," "
"1","4.29409e-05"
"1"," "
"1","0.0001188228"
"1"," "
"1","0.0001295716"
"1"," "
"1","2.21901e-05"
"1"," "
"1","9.9082e-06"
"1"," "
"1","7.8786e-06"
"1"," "
"1","0.161307"
"1"," "
"1","5.5389e-06"
"1"," "
"1","6.2e-09"
"1"," "
"1","1.48043e-05"
"1"," "
"1","1.20873e-05"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.002664357"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","7.9644e-06"
"1"," "
"1","3.134e-07"
"1"," "
"1","0.2518597"
"1"," "
"1","0.000139633"
"1"," "
"1","1.14084e-05"
"1"," "
"1","3.4569e-06"
"1"," "
"1","3.5246e-06"
"1"," "
"1","1.203e-07"
"1"," "
"1","1.5299e-06"
"1"," "
"1","2.6662e-06"
"1"," "
"1","7.8587e-06"
"1"," "
"1","6.967e-06"
"1"," "
"1","2.3036e-06"
"1"," "
"1","3.8421e-06"
"1"," "
"1","8.464e-07"
"1"," "
"1","6.804e-07"
"1"," "
"1","0.0002057237"
"1"," "
"1","4.28e-08"
"1"," "
"1","1e-10"
"1"," "
"1","0.7477403"
"1"," "
"1","1.1087e-06"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.02318754"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","3.39e-08"
"1"," "
"1","0.932912"
"1"," "
"1","4.29e-08"
"1"," "
"1","7.54e-08"
"1"," "
"1","2.287e-07"
"1"," "
"1","1.1e-09"
"1"," "
"1","2.04e-08"
"1"," "
"1","6.63e-08"
"1"," "
"1","6.78e-08"
"1"," "
"1","1.28e-08"
"1"," "
"1","3.35e-08"
"1"," "
"1","3.82e-08"
"1"," "
"1","1.13e-08"
"1"," "
"1","3e-08"
"1"," "
"1","2.66e-08"
"1"," "
"1","5.17e-08"
"1"," "
"1","1.12e-08"
"1"," "
"1","1.231e-07"
"1"," "
"1","4.34e-08"
"1"," "
"1","0.06708699"
"1"," "
"1","4.17e-08"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.007014438"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.0001622658"
"1"," "
"1","9.74315e-05"
"1"," "
"1","0.0003623614"
"1"," "
"1","1.45989e-05"
"1"," "
"1","0.4227858"
"1"," "
"1","0.1767853"
"1"," "
"1","0.1564361"
"1"," "
"1","0.0003494332"
"1"," "
"1","9.12243e-05"
"1"," "
"1","4.74725e-05"
"1"," "
"1","0.0006088425"
"1"," "
"1","0.0001426577"
"1"," "
"1","7.1548e-05"
"1"," "
"1","0.0001865007"
"1"," "
"1","0.0001093782"
"1"," "
"1","0.0001672332"
"1"," "
"1","0.2401872"
"1"," "
"1","0.0003657844"
"1"," "
"1","0.0001418679"
"1"," "
"1","0.0007382373"
"1"," "
"1","0.0001488602"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.001852381"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","3.41588e-05"
"1"," "
"1","0.0001067313"
"1"," "
"1","3.36219e-05"
"1"," "
"1","6.64796e-05"
"1"," "
"1","0.2013239"
"1"," "
"1","1.00621e-05"
"1"," "
"1","2.01882e-05"
"1"," "
"1","6.73255e-05"
"1"," "
"1","0.0001452783"
"1"," "
"1","1.67442e-05"
"1"," "
"1","3.18729e-05"
"1"," "
"1","3.89863e-05"
"1"," "
"1","1.52712e-05"
"1"," "
"1","2.81336e-05"
"1"," "
"1","2.15979e-05"
"1"," "
"1","4.5456e-05"
"1"," "
"1","1.69419e-05"
"1"," "
"1","0.5243017"
"1"," "
"1","0.2736061"
"1"," "
"1","3.52139e-05"
"1"," "
"1","3.41737e-05"
"1"," "
"1","

"
"1","
X1, X0, Z1, Z0 all come directly from dataprep object.

"
"1","
****************"
"1"," "
"1","
 optimization over w weights: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
 v weights supplied manually: computing synthtic control unit 
"
"1"," "
"1","

"
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","
****************"
"1"," "
"1","

MSPE (LOSS V):"
"1"," "
"1","0.008681706"
"1"," "
"1","

solution.v:
"
"1"," "
"1","0.2"
"1"," "
"1","0.2"
"1"," "
"1","0.3"
"1"," "
"1","0.3"
"1"," "
"1","

solution.w:
"
"1"," "
"1","0.0175458"
"1"," "
"1","0.03365251"
"1"," "
"1","0.02165406"
"1"," "
"1","0.01984266"
"1"," "
"1","0.01990514"
"1"," "
"1","0.00979204"
"1"," "
"1","0.01508439"
"1"," "
"1","0.02675486"
"1"," "
"1","0.02420371"
"1"," "
"1","0.01101408"
"1"," "
"1","0.01468673"
"1"," "
"1","0.01706112"
"1"," "
"1","0.009004117"
"1"," "
"1","0.04240821"
"1"," "
"1","0.4919888"
"1"," "
"1","0.04253348"
"1"," "
"1","0.01208365"
"1"," "
"1","0.01953777"
"1"," "
"1","0.1139546"
"1"," "
"1","0.01574208"
"1"," "
"1","0.0215501"
"1"," "
"1","

"
"0","# Effects is a list of lists. Wrangle the list into a dataframe."
"0","temp <- as.data.frame(do.call(cbind, effects))"
"0","effects_df <- as.data.frame(t(as.matrix(temp)))"
"0",""
"0","# Merge the dataframe of effects with a dataframe of states to get state names"
"0","results_df <- aser %>% count(state_abbr, id) %>% "
"0","  arrange(id) %>% select(-n) %>% "
"0","  cbind(effects_df)"
